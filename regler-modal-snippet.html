<!-- Modal: Regler i FjOlsenbanden -->
<div
  id="regler-modal"
  aria-hidden="true"
  role="dialog"
  aria-labelledby="regler-title"
  style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;padding:1.5rem;background:rgba(0,0,0,.65);z-index:1000"
>
  <div
    data-regler-modal-content
    style="width:100%;max-width:760px;max-height:80vh;overflow:auto;background:#121b34;border:1px solid #1a2648;border-radius:16px;padding:1.5rem;color:#e9eef9;box-shadow:0 28px 60px rgba(5,11,36,.7)"
  >
    <header style="display:flex;justify-content:space-between;align-items:center">
      <h2 id="regler-title" style="margin:.5rem 0;font-size:1.4rem;font-weight:700;color:#13a0f9">Regler i FjOlsenbanden</h2>
      <button
        type="button"
        data-close-regler-modal
        aria-label="Lukk"
        style="background:linear-gradient(135deg,#13a0f9,#ff2f9c);color:#fff;border:none;border-radius:999px;padding:.45rem 1.15rem;font-weight:600;box-shadow:0 14px 28px rgba(19,160,249,.35);cursor:pointer"
      >
        Lukk
      </button>
    </header>
    <div style="max-height:70vh;overflow:auto">
      <ul style="margin:1rem 0;padding-left:1.25rem;display:grid;gap:.75rem;color:#c9d4ff;line-height:1.6">
        <li>Nulltoleranse for mobbing og trakassering</li>
        <li>Respekt for moderatorer</li>
        <li>Fair play – juks er forbudt</li>
        <li>Ikke del personlig informasjon</li>
        <li>Hold språk og innhold ryddig</li>
      </ul>
      <p style="margin-top:1rem;color:#aabffb">
        Se fullstendige regler på
        <a href="/regler.html" style="color:#13a0f9;font-weight:600;text-decoration:underline">/regler.html</a>.
      </p>
    </div>
  </div>
</div>
<script>
// Legg til attributtet data-open-regler-modal på knapper for å åpne modalen,
// eller kall window.openReglerModal() programmessig.
(function () {
  const modal = document.getElementById("regler-modal");
  if (!modal) {
    return;
  }

  const openButtons = document.querySelectorAll('[data-open-regler-modal]');
  const closeButtons = modal.querySelectorAll('[data-close-regler-modal]');

  const openModal = () => {
    modal.style.display = "flex";
    modal.setAttribute("aria-hidden", "false");
    document.body.style.overflow = "hidden";
  };

  const closeModal = () => {
    modal.style.display = "none";
    modal.setAttribute("aria-hidden", "true");
    document.body.style.removeProperty("overflow");
  };

  const isModalVisible = () => modal.style.display !== "none";

  if (typeof window !== "undefined") {
    window.openReglerModal = openModal;
    window.closeReglerModal = closeModal;
  }

  openButtons.forEach((button) => {
    button.addEventListener("click", (event) => {
      event.preventDefault();
      openModal();
    });
  });

  closeButtons.forEach((button) => {
    button.addEventListener("click", (event) => {
      event.preventDefault();
      closeModal();
    });
  });

  modal.addEventListener("click", (event) => {
    if (event.target === modal) {
      closeModal();
    }
  });

  document.addEventListener("keydown", (event) => {
    if (event.key === "Escape" && isModalVisible()) {
      closeModal();
    }
  });
})();
</script>
